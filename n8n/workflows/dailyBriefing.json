{
  "name": "My Daily Briefing",
  "nodes": [
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -2288,
        -48
      ],
      "id": "e852c106-f587-4519-9f9d-bc3962e6737f",
      "name": "When clicking â€˜Execute workflowâ€™"
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "cronExpression",
              "expression": "0 6 * * *"
            }
          ]
        }
      },
      "id": "55513e0e-412d-412c-9a62-87adbb979197",
      "name": "Every morning (6:00)",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -2288,
        144
      ]
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.contexto_completo }}",
        "options": {
          "systemMessage": "Eres un Asistente de Productividad de alto rendimiento. Tu objetivo es transformar un JSON desordenado de tareas y eventos en un plan de acciÃ³n diario ultra-claro.\n\nREGLAS DE CLASIFICACIÃ“N:\n\nBloque Laboral: Prioriza todo lo relacionado con el desarrollo de rebeal o tareas tÃ©cnicas de ingenierÃ­a. Usa el hashtag #rebeal o #ingenieria si aparecen.\n\nBloque Personal: Todo lo marcado con #personal, trÃ¡mites de visado, o temas familiares.\n\nPrioridad Hoy: Analiza las fechas \"due\" y los eventos de calendario de hoy (19 de febrero de 2026).\n\nFORMATO DE SALIDA (HTML para Telegram). Usa <b></b> para negritas, emojis como viÃ±etas en lugar de asteriscos (ej: ðŸš€, ðŸ”¹, âœ…). NO uses asteriscos * ni guiones bajos _ sueltos.\n\nðŸ’¼ Business\n\n[Hora] - [Tarea/Evento]: [Detalles de sitio/personas]\n\nðŸ  Personal\n\n[Hora] - [Tarea/Evento]: [UbicaciÃ³n en Manizales si aplica]\n\nâš ï¸ Highlights\n\n[DÃ­a] - [Hito relevante]: (Menciona si hay algo crÃ­tico como el Visado o hitos de rebeal).\n\nNOTAS TÃ‰CNICAS:\n\nSi un evento tiene ubicaciÃ³n o \"description\", extrÃ¡ela.\n\nSÃ© breve pero directo, con un tono profesional y ligeramente ingenioso."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        -224,
        -128
      ],
      "id": "f047c6c8-53a6-407b-ab6f-73b7620b9dce",
      "name": "AI Agent",
      "executeOnce": true
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.0-flash",
        "options": {
          "temperature": 0.1
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -224,
        48
      ],
      "id": "ad5f61b1-8b2b-420d-aff4-1ac373648d28",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "1X3HQekSXuPXxwIF",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "operation": "getAll",
        "task": "VnJhOVRqckpoOUFpSW9TUw",
        "returnAll": true,
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.googleTasks",
      "typeVersion": 1,
      "position": [
        -1600,
        -416
      ],
      "id": "08a55b3f-7c80-43ba-be55-47ea75f05e6f",
      "name": "TASKS / High",
      "alwaysOutputData": false,
      "credentials": {
        "googleTasksOAuth2Api": {
          "id": "mAC4HVTc9huEUeUn",
          "name": "Google Tasks account"
        }
      }
    },
    {
      "parameters": {
        "operation": "getAll",
        "calendar": {
          "__rl": true,
          "value": "alfredo.garcia.torres@gmail.com",
          "mode": "list",
          "cachedResultName": "alfredo.garcia.torres@gmail.com"
        },
        "returnAll": true,
        "options": {}
      },
      "type": "n8n-nodes-base.googleCalendar",
      "typeVersion": 1.3,
      "position": [
        -1600,
        144
      ],
      "id": "92735e46-d63a-4cac-a932-8fbd8e24ead0",
      "name": "CAL / Me",
      "executeOnce": false,
      "credentials": {
        "googleCalendarOAuth2Api": {
          "id": "I9lCuECopLV28HuY",
          "name": "Google Calendar account"
        }
      }
    },
    {
      "parameters": {
        "operation": "getAll",
        "task": "dkZadkd6ZEVkOWdoM0lSQg",
        "returnAll": true,
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.googleTasks",
      "typeVersion": 1,
      "position": [
        -1600,
        -224
      ],
      "id": "77d12acd-cb74-4c34-9528-3421b08cf7bc",
      "name": "TASKS / Med",
      "executeOnce": false,
      "credentials": {
        "googleTasksOAuth2Api": {
          "id": "mAC4HVTc9huEUeUn",
          "name": "Google Tasks account"
        }
      }
    },
    {
      "parameters": {
        "operation": "getAll",
        "calendar": {
          "__rl": true,
          "value": "46d5d84604b8c8683777fa575cc76728df696639835e26b5e046d1fc0dab6511@group.calendar.google.com",
          "mode": "list",
          "cachedResultName": "Trastos"
        },
        "returnAll": true,
        "options": {}
      },
      "type": "n8n-nodes-base.googleCalendar",
      "typeVersion": 1.3,
      "position": [
        -1600,
        -48
      ],
      "id": "df57c70f-3480-4575-a5da-89fd294744b8",
      "name": "CAL / Trastos",
      "executeOnce": false,
      "credentials": {
        "googleCalendarOAuth2Api": {
          "id": "I9lCuECopLV28HuY",
          "name": "Google Calendar account"
        }
      }
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={\n  \"description\": \"{{ $json.description }}\",\n  \"end\": \"{{ $json.end.dateTime }}\",\n  \"timezone\": \"{{ $json.end.timeZone }}\",\n  \"start\":\"{{ $json.start.dateTime }}\",\n  \"organizer\":\"{{ $json.organizer.email }}\",\n  \"summary\":\"{{ $json.summary }}\",\n  \"calendarName\":\"{{ $json.organizer.displayName }}\",\n}\n ",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1392,
        -48
      ],
      "id": "e1d780d8-0867-47eb-a6da-40e878fb79bb",
      "name": "Edit Fields2",
      "alwaysOutputData": true
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        -1184,
        -320
      ],
      "id": "512ea32a-6f5c-4610-b875-524d7bbbfe5e",
      "name": "Merge / TASKS"
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={\n  \"title\": \"{{ $json.title }}\",\n  \"due\": \"{{ $json.due }}\",\n  \"priority\": \"High\"\n}",
        "includeOtherFields": true,
        "include": "selected",
        "includeFields": "title,due,notes",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1392,
        -416
      ],
      "id": "c9d15b44-5037-4a0f-8d7c-b08b9c0d3b3a",
      "name": "Edit HIGH",
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={\n  \"title\": \"{{ $json.title }}\",\n  \"due\": \"{{ $json.due }}\",\n  \"priority\": \"Medium\"\n} ",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1392,
        -224
      ],
      "id": "9fa9a120-bbb9-4e49-9db0-ba537d812654",
      "name": "Edit Fields",
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "{\n  \"description\": \"{{ $json.description }}\",\n  \"end\": \"{{ $json.end.dateTime }}\",\n  \"timezone\": \"{{ $json.end.timeZone }}\",\n  \"start\":\"{{ $json.start.dateTime }}\",\n  \"organizer\":\"{{ $json.organizer.email }}\",\n  \"summary\":\"{{ $json.summary }}\",\n  \"calendarName\":\"{{ $json.organizer.displayName }}\",\n}\n ",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1392,
        144
      ],
      "id": "5330c47b-65e9-4bb7-8168-c5d35bcaecec",
      "name": "Edit Fields1",
      "alwaysOutputData": true
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        -1184,
        48
      ],
      "id": "344dcec4-b819-4bb6-a8d7-0522ee59fe4b",
      "name": "Merge / CAL"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        -752,
        -128
      ],
      "id": "d2c86776-925a-4872-8255-4efc90bda89f",
      "name": "Merge / ALL"
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={\n  \"type\": \"task\",\n  \"data\": {\n    \"title\": \"{{ $json.title }}\",\n    \"due\": \"{{ $json.due }}\",\n    \"priority\":\"{{ $json.priority }}\"\n  },\n}\n ",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -976,
        -320
      ],
      "id": "e4251801-b604-4201-a44e-de61ebc5e05c",
      "name": "Edit Fields3"
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={\n  \"type\": \"event\",\n  \"data\": {\n  \"description\": \"{{ $json.description }}\",\n  \"end\": \"{{ $json.end }}\",\n  \"timezone\": \"{{ $json.timezone }}\",\n  \"start\":\"{{ $json.start }}\",\n  \"organizer\":\"{{ $json.organizer }}\",\n  \"summary\":\"{{ $json.summary }}\",\n  \"calendarName\":\"{{ $json.calendarName }}\",\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -976,
        48
      ],
      "id": "c67f3e35-4e40-4987-aba8-6d77c75a23d4",
      "name": "Edit Fields4"
    },
    {
      "parameters": {
        "jsCode": "// Agrupamos todos los 14 elementos del Merge en un solo string\nconst allData = items.map(item => {\n  const i = item.json;\n  // Extraemos lo Ãºtil segÃºn sea Tarea o Evento\n  if (i.type === 'task') {\n    return `- [TAREA] ${i.data.title} (Vence: ${i.data.due || 'N/A'}) [${i.data.priority}]`;\n  } else {\n    return `- [EVENTO] ${i.data.summary} (Inicio: ${i.data.start}) en ${i.data.calendarName}`;\n  }\n}).join('\\n');\n\n// Devolvemos un UNICO objeto con todo el texto\nreturn [{ json: { contexto_completo: allData } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -576,
        -128
      ],
      "id": "6249d4cb-f583-4b15-82a0-281c47acb080",
      "name": "List to variable"
    },
    {
      "parameters": {
        "inputSource": "jsonExample",
        "jsonExample": "{\n  \"channel\": \"telegram\",\n  \"command\": \"/plan\",\n  \"chatID\":\"1234\"\n}"
      },
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "typeVersion": 1.1,
      "position": [
        -2288,
        -320
      ],
      "id": "28b047e3-49d4-4a03-a079-44345e72ec4e",
      "name": "When Executed by Another Workflow"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "1s8bYMIYbzv2fpLx",
          "mode": "list",
          "cachedResultUrl": "/workflow/1s8bYMIYbzv2fpLx",
          "cachedResultName": "Bot Output"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "chatID": "={{ $('Normalized Input Fields').item.json.chatID }}",
            "channel": "={{ $('Normalized Input Fields').item.json.channel }}",
            "message": "={{ $json.output }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "channel",
              "displayName": "channel",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "message",
              "displayName": "message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "messageOptions",
              "displayName": "messageOptions",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "array",
              "removed": true
            },
            {
              "id": "chatID",
              "displayName": "chatID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        336,
        -128
      ],
      "id": "b1451cc9-5af0-4cba-b9fc-2eb8dfa0ffa2",
      "name": "Call 'Bot Output'"
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "{\n  \"channel\": \"telegram\",\n  \"command\": \"/plan\",\n  \"chatID\":\"7812154300\"\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -2128,
        48
      ],
      "id": "c3e402bb-7029-4b72-8ee0-71ef7a9a0c5b",
      "name": "Manual Input Fields"
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={\n  \"channel\": \"{{ $json.channel}}\",\n  \"command\": \"{{ $json.command }}\",\n  \"chatID\":\"{{ $json.chatID }}\"\n} ",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1872,
        -112
      ],
      "id": "0b25b71b-8bb6-48d0-aa10-9e082190cf38",
      "name": "Normalized Input Fields"
    }
  ],
  "pinData": {},
  "connections": {
    "When clicking â€˜Execute workflowâ€™": {
      "main": [
        [
          {
            "node": "Manual Input Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Every morning (6:00)": {
      "main": [
        [
          {
            "node": "Manual Input Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Call 'Bot Output'",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "TASKS / High": {
      "main": [
        [
          {
            "node": "Edit HIGH",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "CAL / Me": {
      "main": [
        [
          {
            "node": "Edit Fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "TASKS / Med": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "CAL / Trastos": {
      "main": [
        [
          {
            "node": "Edit Fields2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields2": {
      "main": [
        [
          {
            "node": "Merge / CAL",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge / TASKS": {
      "main": [
        [
          {
            "node": "Edit Fields3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit HIGH": {
      "main": [
        [
          {
            "node": "Merge / TASKS",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "Merge / TASKS",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Edit Fields1": {
      "main": [
        [
          {
            "node": "Merge / CAL",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Merge / CAL": {
      "main": [
        [
          {
            "node": "Edit Fields4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge / ALL": {
      "main": [
        [
          {
            "node": "List to variable",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields3": {
      "main": [
        [
          {
            "node": "Merge / ALL",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields4": {
      "main": [
        [
          {
            "node": "Merge / ALL",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "List to variable": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When Executed by Another Workflow": {
      "main": [
        [
          {
            "node": "Normalized Input Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Call 'Bot Output'": {
      "main": [
        []
      ]
    },
    "Manual Input Fields": {
      "main": [
        [
          {
            "node": "Normalized Input Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Normalized Input Fields": {
      "main": [
        [
          {
            "node": "TASKS / High",
            "type": "main",
            "index": 0
          },
          {
            "node": "TASKS / Med",
            "type": "main",
            "index": 0
          },
          {
            "node": "CAL / Trastos",
            "type": "main",
            "index": 0
          },
          {
            "node": "CAL / Me",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1",
    "binaryMode": "separate",
    "availableInMCP": false
  },
  "versionId": "358aa0b8-d652-4627-a7cd-be9c0f4286dc",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "c161f39dbc3d63a699f9365c3d1da2eea605158e14e61448e8a00c19513dbf33"
  },
  "id": "ZLZGmhoUC2eGKAOC",
  "tags": []
}